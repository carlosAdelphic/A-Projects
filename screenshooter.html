<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="html2canvas.js"></script>
	<script type="text/javascript">
		
	function previewCreative (creative_tag)
	{
		/*var ifr = document.createElement('iframe');
 		ifr.setAttribute("frameborder", "0");
  		ifr.setAttribute("id", "creativeLoader");
  		var iframe_width = Number(document.getElementById('width').value) + 10;
  		var iframe_height = Number(document.getElementById('height').value) + 10;
		ifr.setAttribute("width", iframe_width); 
		ifr.setAttribute("height", iframe_height);
		*/
		//console.log(document.getElementById('tag_loader').contentWindow.innerHTML)
		var finaltag = "<div>"+creative_tag+"</div>"
		document.getElementById('tag_loader').contentWindow.document.write(finaltag);

		//we add the button for screenshoting the creative
		/*
		var screenshot_btn = "<button style=\"margin-left:15px\" type=\"Preview_Button\" onclick=\"generateScreenshot()\">Take Screenshot of Creative</button>"
		document.getElementById("buttons_cell").innerHTML += screenshot_btn;*/



	}

	function generateScreenshot()
	{
		var loader = document.getElementById('creativeLoader').contentWindow.document.body;

		console.log(loader)


		
/*
		html2canvas(loader, {
		  onrendered: function(canvas) {
		  	console.log("generating")
		    document.getElementById("screenshot").innerHTML = canvas;
		  },
		  width: Number(document.getElementById('width').value),
		  height: Number(document.getElementById('height').value)
		});*/

		html2canvas(loader, {
		  onrendered: function(canvas) {
		  	console.log("Rendered")
		    document.body.appendChild(canvas);
		  },
		  width: 600,
		  height: 600
		});


	}


	</script>
</head>
<body>

	<header role="banner" id="header" style="margin-top: 20px; margin-left: 15px">
		<div id="logo"><a title="Mobile and cross-device demand side platform" href="http://adelphic.com"><img src="http://adelphic.com/wp-content/themes/adelp/images/adelphic-logo.png"/></a></div>
		<div id="title"><h1>Creative Screenshot Generator v1.0</h1></div>
	</header>

	<table style="width:550px; margin-left: 15px">
	  <tr>
	    <td><p style="font-size:14px">Creative width: </p></td>
	    <td><textarea name="width" id="width" style="font-size:12px; vertical-align:top; width:40px; height:15px"></textarea></td>
	  </tr>
	  <tr>
	    <td><p style="font-size:14px">Creative height: </p></td>
	    <td><textarea name="height" id="height" style="font-size:12px; vertical-align:top; width:40px; height:15px"></textarea></td>
	  </tr>
	  <tr>
	  	<td><p style="font-size:14px">Creative tag: </p></td>
	  	<td><textarea name="tag" id="tag" style="vertical-align:top; width:400px; height:155px"></textarea></td>
	  </tr>
	   <tr>
	  	<td></td>
	  	<td style="text-align: left" id="buttons_cell"><button type="Preview_Button" onclick="previewCreative(document.getElementById('tag').value)">Preview Creative</button></td>
	  </tr>
	</table>

	<table style="width:550px; margin-left: 15px">
	  <tr>
	  	<td><p style="font-size:14px">Preview: </p></td>
	  	<td><p style="font-size:14px">Static screenshot: </p></td>
	  </tr>
	  <tr>
	  	<td style="text-align: left" id="preview">
	  		
	  			<iframe src="tag_loader.html" scrolling="no" name="tag_loader" id="tag_loader" width="320" height="480" frameBorder="0" style="padding: 0; overflow: hidden"></iframe>
	  		
	  	</td>
	  	<td style="text-align: left" id="screenshot"></td>
	  </tr>
	  
	  <tr style="height: 40px; font-size: 14px; vertical-align:bottom; "">
	  	<td colspan="2">Not working or having an issue?Let us know <a href="mailto:carlos@adelphic.com?subject=Issues with my tag&body=Please remember to add the tag you're having issues with here">here</a></td>
	  </tr>
	  <tr style="height: 20px; font-size: 14px; vertical-align:bottom; ">
	  	<td colspan="2"><a href="versioncontrol.html" target="_blank">Version control</a></td>
	  </tr>
	</table>

</body>
</html>